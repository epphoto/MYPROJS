import requests
from bs4 import BeautifulSoup

# Get user preferences
bedrooms = input("Enter the number of bedrooms: ")
bathrooms = input("Enter the number of bathrooms: ")
square_footage = input("Enter the desired square footage: ")
zip_code = input("Enter the zip code: ")

# Construct the search URL using user preferences
search_url = f"https://www.zillow.com/homes/for_sale/{zip_code}/0_singlestory/days_sort/{bedrooms}-_beds/{bathrooms}-_baths/{square_footage}-_sqft/0-99999999_price/"

# Send a GET request to the search URL
response = requests.get(search_url)

# Parse the HTML content using BeautifulSoup
soup = BeautifulSoup(response.content, 'html.parser')

# Use BeautifulSoup to scrape data from the search results
listings = soup.find_all('ul', class_='photo-cards')

if not listings:  # Check if the list is empty
    print("No listings found.")
else:
    listings = listings[0].find_all('li')

    # Get the average price for the same parameters
    price_list = []
    for listing in listings:
        listing_price = listing.find('div', class_='list-card-price').text.strip()
        price_list.append(int(listing_price.replace('$', '').replace(',', '')))

    average_price = sum(price_list) / len(price_list)

    # Iterate over listings and extract desired information
    for listing in listings:
        listing_title = listing.find('h3', class_='list-card-addr').text.strip()
        listing_price = listing.find('div', class_='list-card-price').text.strip()

        if int(listing_price.replace('$', '').replace(',', '')) < average_price:
            value = "Good Value"
        else:
            value = "Bad Value"

        print('Title:', listing_title)
        print('Price:', listing_price)
        print('Value:', value)
        print('---')
